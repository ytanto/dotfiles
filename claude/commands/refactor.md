# refactor

コードのリファクタリングを実行します。

## 使い方

```
/refactor [path]
```

- `path`: リファクタリング対象のフォルダまたはファイルパス（オプション）
  - 指定した場合: そのパス内のファイルのみを対象
  - 指定しない場合: git statusで変更されているファイル全てを対象（staged・unstaged問わず）

## プロンプト

以下の手順でリファクタリングを実行してください：

1. **対象ファイルの特定**
   {{#if path}}
   - 指定されたパス `{{path}}` 内のファイルを対象とする
   - フォルダの場合は配下のすべてのコードファイルを対象
   {{else}}
   - `git status --short` を実行して変更されたファイルを取得
   - staged（Added, Modified）およびunstaged（Modified, Added）のファイルをすべて対象
   - ただし、変更した箇所のみをリファクタリング対象とすることに注意
   {{/if}}

2. **ファイルの分析**
   - 対象ファイルを読み込み、以下の観点でリファクタリングポイントを特定：
     - 未使用のインポート・変数・処理
     - テストの不足
     - コードの重複
     - 複雑すぎる関数・メソッド
     - 命名の改善余地

3. **リファクタリングの実行**
   - 特定したリファクタリングポイントを修正
   - 既存の機能を壊さないよう注意
   - コードスタイル・規約に従う（CLAUDE.md参照）
   - 時間がかかっても、品質を優先して丁寧に実施すること

4. **Lintやテストの実行**
   - CLAUDE.mdに記載のガイドラインに従い、Lintやテストを実行
     - check:all コマンドが用意されていることが多い
   - テストが失敗した場合は修正して再実行
   - テストが不足している場合は追加を検討

5. **結果の報告**
   - 実行したリファクタリング内容を簡潔に報告
   - 改善した点を箇条書きで列挙
